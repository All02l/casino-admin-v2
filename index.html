<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { color: white; background: #1c1c1c; font-family: sans-serif; padding: 20px; text-align: center; }
        .card { background: #2c2c2c; padding: 15px; border-radius: 10px; margin-bottom: 15px; }
        h2 { color: #0088cc; }
        button { 
            background: #0088cc; color: white; border: none; 
            padding: 12px; width: 100%; border-radius: 8px; 
            font-weight: bold; cursor: pointer;
        }
        button:active { background: #0077b3; }
    </style>
</head>
<body>
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ö–∞–∑–∏–Ω–æ üé∞</h2>

    <div class="card">
        <h3>üí∞ –ö—É—Ä—Å –≤–∞–ª—é—Ç</h3>
        <button onclick="changeRate()">–ò–∑–º–µ–Ω–∏—Ç—å –∫—É—Ä—Å</button>
    </div>

    <div class="card">
        <h3>üñ• –°–µ—Ä–≤–µ—Ä—ã (1-33)</h3>
        <button onclick="manageServers()">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        function changeRate() {
            let newRate = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∫—É—Ä—Å:");
            if (newRate !== null && newRate.trim() !== "") {
                tg.sendData("set_rate:" + newRate.trim());
            }
        }

        async function manageServers() {
            // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –Ω–æ–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞
            let serverNum = prompt("–®–∞–≥ 1/3: –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞ (1-33):");
            if (serverNum === null || serverNum.trim() === "" || serverNum < 1 || serverNum > 33) {
                if (serverNum !== null) alert("–û—à–∏–±–∫–∞! –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 33.");
                return;
            }

            // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –Ω–æ–º–µ—Ä —Å—á—ë—Ç–∞
            let accNum = prompt("–®–∞–≥ 2/3: –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Å—á—ë—Ç–∞ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ " + serverNum + ":");
            if (accNum === null || accNum.trim() === "") {
                alert("–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ: –Ω–æ–º–µ—Ä —Å—á—ë—Ç–∞ –Ω–µ –≤–≤–µ–¥–µ–Ω.");
                return;
            }

            // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∏–∫)
            let accName = prompt("–®–∞–≥ 3/3: –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á—ë—Ç–∞ (–Ω–∏–∫):");
            if (accName === null || accName.trim() === "") {
                alert("–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –≤–≤–µ–¥–µ–Ω–æ.");
                return;
            }

            // –ï—Å–ª–∏ –≤—Å—ë –≤–≤–µ–¥–µ–Ω–æ, —Å–∫–ª–µ–∏–≤–∞–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
            let finalData = "set_server:" + serverNum.trim() + "|" + accNum.trim() + "|" + accName.trim();
            tg.sendData(finalData);
        }
    </script>
</body>
</html>
