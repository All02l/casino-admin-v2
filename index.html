<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { color: white; background: #1c1c1c; font-family: sans-serif; padding: 20px; }
        .card { background: #2c2c2c; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #444; }
        h3 { margin-top: 0; color: #0088cc; }
        .server-item { background: #111; padding: 10px; margin: 5px 0; border-radius: 5px; font-size: 14px; border-left: 4px solid #0088cc; }
        button { background: #0088cc; color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; }
        button:active { background: #005588; }
    </style>
</head>
<body>
    <div class="card">
        <h3>üñ• –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞</h3>
        <div id="server-list">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
    </div>

    <button onclick="addServer()">‚ûï –ù–∞—Å—Ç—Ä–æ–∏—Ç—å / –ò–∑–º–µ–Ω–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const urlParams = new URLSearchParams(window.location.search);
        const rawData = urlParams.get('data');
        const listDiv = document.getElementById('server-list');

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π data
        if (rawData && rawData !== "none") {
            listDiv.innerHTML = "";
            const servers = rawData.split("|");
            servers.forEach(s => {
                const [id, acc, name] = s.split(":");
                listDiv.innerHTML += `<div class="server-item">–°–µ—Ä–≤–µ—Ä <b>${id}</b><br>üí≥ ${acc} | üë§ ${name}</div>`;
            });
        } else {
            listDiv.innerHTML = "–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤";
        }

        function addServer() {
            let id = prompt("–ù–æ–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞ (1-33):");
            if (!id) return;
            let acc = prompt("–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞:");
            if (!acc) return;
            let name = prompt("–ù–∏–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:");
            if (!name) return;

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
            tg.sendData(`set_server:${id}|${acc}|${name}`);
            tg.close();
        }
    </script>
</body>
</html>
